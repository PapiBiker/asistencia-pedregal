(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))m(l);new MutationObserver(l=>{for(const d of l)if(d.type==="childList")for(const s of d.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&m(s)}).observe(document,{childList:!0,subtree:!0});function o(l){const d={};return l.integrity&&(d.integrity=l.integrity),l.referrerPolicy&&(d.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?d.credentials="include":l.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function m(l){if(l.ep)return;l.ep=!0;const d=o(l);fetch(l.href,d)}})();const J="modulepreload",K=function(e){return"/"+e},M={},Z=function(t,o,m){let l=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),w=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));l=Promise.allSettled(o.map(i=>{if(i=K(i),i in M)return;M[i]=!0;const c=i.endsWith(".css"),p=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${p}`))return;const n=document.createElement("link");if(n.rel=c?"stylesheet":J,c||(n.as="script"),n.crossOrigin="",n.href=i,w&&n.setAttribute("nonce",w),document.head.appendChild(n),c)return new Promise((r,f)=>{n.addEventListener("load",r),n.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})}))}function d(s){const w=new Event("vite:preloadError",{cancelable:!0});if(w.payload=s,window.dispatchEvent(w),!w.defaultPrevented)throw s}return l.then(s=>{for(const w of s||[])w.status==="rejected"&&d(w.reason);return t().catch(d)})};function R(e={}){const{immediate:t=!1,onNeedRefresh:o,onOfflineReady:m,onRegistered:l,onRegisteredSW:d,onRegisterError:s}=e;let w,i;const c=async(n=!0)=>{await i};async function p(){if("serviceWorker"in navigator){if(w=await Z(async()=>{const{Workbox:n}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:n}},[]).then(({Workbox:n})=>new n("/sw.js",{scope:"/",type:"classic"})).catch(n=>{s==null||s(n)}),!w)return;w.addEventListener("activated",n=>{(n.isUpdate||n.isExternal)&&window.location.reload()}),w.addEventListener("installed",n=>{n.isUpdate||m==null||m()}),w.register({immediate:t}).then(n=>{d?d("/sw.js",n):l==null||l(n)}).catch(n=>{s==null||s(n)})}}return i=p(),c}const P=(e,t)=>t.some(o=>e instanceof o);let k,U;function G(){return k||(k=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function X(){return U||(U=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const D=new WeakMap,L=new WeakMap,C=new WeakMap;function Y(e){const t=new Promise((o,m)=>{const l=()=>{e.removeEventListener("success",d),e.removeEventListener("error",s)},d=()=>{o(B(e.result)),l()},s=()=>{m(e.error),l()};e.addEventListener("success",d),e.addEventListener("error",s)});return C.set(t,e),t}function ee(e){if(D.has(e))return;const t=new Promise((o,m)=>{const l=()=>{e.removeEventListener("complete",d),e.removeEventListener("error",s),e.removeEventListener("abort",s)},d=()=>{o(),l()},s=()=>{m(e.error||new DOMException("AbortError","AbortError")),l()};e.addEventListener("complete",d),e.addEventListener("error",s),e.addEventListener("abort",s)});D.set(e,t)}let j={get(e,t,o){if(e instanceof IDBTransaction){if(t==="done")return D.get(e);if(t==="store")return o.objectStoreNames[1]?void 0:o.objectStore(o.objectStoreNames[0])}return B(e[t])},set(e,t,o){return e[t]=o,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function q(e){j=e(j)}function te(e){return X().includes(e)?function(...t){return e.apply(O(this),t),B(this.request)}:function(...t){return B(e.apply(O(this),t))}}function re(e){return typeof e=="function"?te(e):(e instanceof IDBTransaction&&ee(e),P(e,G())?new Proxy(e,j):e)}function B(e){if(e instanceof IDBRequest)return Y(e);if(L.has(e))return L.get(e);const t=re(e);return t!==e&&(L.set(e,t),C.set(t,e)),t}const O=e=>C.get(e);function oe(e,t,{blocked:o,upgrade:m,blocking:l,terminated:d}={}){const s=indexedDB.open(e,t),w=B(s);return m&&s.addEventListener("upgradeneeded",i=>{m(B(s.result),i.oldVersion,i.newVersion,B(s.transaction),i)}),o&&s.addEventListener("blocked",i=>o(i.oldVersion,i.newVersion,i)),w.then(i=>{d&&i.addEventListener("close",()=>d()),l&&i.addEventListener("versionchange",c=>l(c.oldVersion,c.newVersion,c))}).catch(()=>{}),w}const ne=["get","getKey","getAll","getAllKeys","count"],ie=["put","add","delete","clear"],A=new Map;function z(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(A.get(t))return A.get(t);const o=t.replace(/FromIndex$/,""),m=t!==o,l=ie.includes(o);if(!(o in(m?IDBIndex:IDBObjectStore).prototype)||!(l||ne.includes(o)))return;const d=async function(s,...w){const i=this.transaction(s,l?"readwrite":"readonly");let c=i.store;return m&&(c=c.index(w.shift())),(await Promise.all([c[o](...w),l&&i.done]))[0]};return A.set(t,d),d}q(e=>({...e,get:(t,o,m)=>z(t,o)||e.get(t,o,m),has:(t,o)=>!!z(t,o)||e.has(t,o)}));const ae=["continue","continuePrimaryKey","advance"],V={},N=new WeakMap,_=new WeakMap,se={get(e,t){if(!ae.includes(t))return e[t];let o=V[t];return o||(o=V[t]=function(...m){N.set(this,_.get(this)[t](...m))}),o}};async function*ce(...e){let t=this;if(t instanceof IDBCursor||(t=await t.openCursor(...e)),!t)return;t=t;const o=new Proxy(t,se);for(_.set(o,t),C.set(o,O(t));t;)yield o,t=await(N.get(o)||t.continue()),N.delete(o)}function H(e,t){return t===Symbol.asyncIterator&&P(e,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&P(e,[IDBIndex,IDBObjectStore])}q(e=>({...e,get(t,o,m){return H(t,o)?ce:e.get(t,o,m)},has(t,o){return H(t,o)||e.has(t,o)}}));const E="https://asistencia-backend-production-53df.up.railway.app";R({onNeedRefresh(){console.log("🔄 Nueva versión disponible. Recarga para actualizar.")},onOfflineReady(){console.log("✅ App lista para trabajar sin conexión.")}});window.addEventListener("online",()=>{console.log("🌐 Conexión restaurada")});window.addEventListener("offline",()=>{console.log("📴 Sin conexión")});const le=async()=>{const e=await oe("asiscamp-db",1,{upgrade(m){m.objectStoreNames.contains("usuarios")||m.createObjectStore("usuarios",{keyPath:"id"})}}),t=localStorage.getItem("nombre"),o=localStorage.getItem("usuario_id");t&&o&&await e.put("usuarios",{id:parseInt(o),nombre:t,rol:localStorage.getItem("perfil")})};le();R({onNeedRefresh(){console.log("🔄 Nueva versión disponible. Recarga para actualizar.")},onOfflineReady(){console.log("✅ La app está lista para funcionar offline.")}});document.addEventListener("DOMContentLoaded",()=>{var w;const e=window.location.pathname,t=localStorage.getItem("token"),o=localStorage.getItem("usuario_id"),m=(w=localStorage.getItem("perfil"))==null?void 0:w.toLowerCase();if(!e.endsWith("index.html")&&e!=="/"&&(l("#header","/src/components/header.html"),l("#footer","/src/components/footer.html")),!e.endsWith("index.html")&&e!=="/"&&(!t||!o||!m)){alert("Sesión expirada o inválida. Inicia sesión."),window.location.href="/";return}if(e.includes("/admin")){if(m!=="admin"){const r=document.getElementById("iniciomenu");r&&(r.style.display="none"),alert("Acceso solo para administradores"),window.location.href="/asistencia";return}const i=document.getElementById("addUserBtn");i&&i.addEventListener("click",p),c(),n();async function c(){try{const f=await(await fetch(`${E}/users`,{headers:{Authorization:`Bearer ${t}`}})).json(),a=document.querySelector("#usuariosTable tbody");a.innerHTML="",f.forEach(u=>{const b=document.createElement("tr");b.innerHTML=`
            <td>${u.id}</td>
            <td>${u.nombre}</td>
            <td>${u.perfil}</td>
            <td>${u.usuario}</td>
            <td>${u.estado}</td>
            <td class="text-center">
              <button class="btn btn-outline-secondary" onclick="editUser(${u.id}, '${u.nombre}', '${u.perfil}', '${u.usuario}' )">Editar</button>
              <button class="btn btn-outline-primary" onclick="desactivarUsuario(${u.id})">Desactivar</button>
              <button class="btn btn-outline-danger" onclick="deleteUser(${u.id})">Eliminar</button>
            </td>
          `,a.appendChild(b)})}catch(r){console.error("Error al cargar usuarios:",r)}}async function p(){const{value:r}=await Swal.fire({title:"Nuevo usuario",input:"text",inputPlaceholder:"Usuario del nuevo usuario",showCancelButton:!0,inputValidator:g=>{if(!g)return"Por favor ingresa un usuario"}});if(!r)return;const{value:f}=await Swal.fire({title:"Nuevo nombre",input:"text",inputPlaceholder:"Nombre del nuevo usuario",showCancelButton:!0,inputValidator:g=>{if(!g)return"Por favor ingresa un nombre"}});if(!f)return;const{value:a}=await Swal.fire({title:"Perfil",input:"text",inputPlaceholder:"Perfil (admin/usuario)",showCancelButton:!0,inputValidator:g=>{if(!g)return"Por favor ingresa un perfil"}});if(!a)return;const{value:u}=await Swal.fire({title:"Correo",input:"email",inputPlaceholder:"Correo del nuevo usuario",showCancelButton:!0,inputValidator:g=>{if(!g)return"Por favor ingresa un correo";if(!/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(g))return"Correo no válido"}});if(!u)return;const{value:b}=await Swal.fire({title:"Contraseña",input:"password",inputPlaceholder:"Contraseña del nuevo usuario",showCancelButton:!0,inputValidator:g=>{if(!g)return"Por favor ingresa una contraseña"}});if(b)try{const g=await fetch(`${E}/users`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({usuario:r,nombre:f,perfil:a,correo:u,password:b})});if(g.ok)Swal.fire({title:"¡Usuario agregado!",text:"El usuario se ha agregado correctamente.",icon:"success",confirmButtonText:"Aceptar"}),c();else{const h=await g.json();Swal.fire({title:"Error",text:h.error||"No se pudo agregar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}}catch(g){console.error("Error:",g),Swal.fire({title:"Error",text:"Hubo un problema al agregar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}}window.editUser=async function(r,f,a,u,b){const{value:g}=await Swal.fire({title:"Nuevo nombre",input:"text",inputValue:f,showCancelButton:!0,inputValidator:y=>{if(!y)return"Por favor ingresa un nombre"}});if(!g)return;const{value:h}=await Swal.fire({title:"Nuevo perfil",input:"text",inputValue:a,showCancelButton:!0,inputValidator:y=>{if(!y)return"Por favor ingresa un perfil"}});if(!h)return;const{value:v}=await Swal.fire({title:"Nuevo usuario",input:"text",inputValue:u,showCancelButton:!0,inputValidator:y=>{if(!y)return"Por favor ingresa un nombre de usuario"}});if(!v)return;const{value:x}=await Swal.fire({title:"Estado del usuario",input:"select",inputOptions:{activo:"Activo",inactivo:"Inactivo"},inputValue:b||"activo",showCancelButton:!0,inputValidator:y=>{if(!y)return"Por favor selecciona un estado"}});if(x)try{const y=await fetch(`${E}/users/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({usuario:v,nombre:g,perfil:h,estado:x})});if(y.ok)Swal.fire({title:"¡Usuario actualizado!",text:"Los datos del usuario fueron actualizados con éxito.",icon:"success",confirmButtonText:"Aceptar"}),c();else{const S=await y.json();Swal.fire({title:"Error",text:S.error||"No se pudo actualizar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}}catch(y){console.error("Error:",y),Swal.fire({title:"Error",text:"Hubo un problema al actualizar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}},window.desactivarUsuario=async function(r){if((await Swal.fire({title:"¿Estás seguro?",text:"El usuario será desactivado y no podrá acceder al sistema.",icon:"warning",showCancelButton:!0,confirmButtonText:"Sí, desactivar",cancelButtonText:"Cancelar"})).isConfirmed)try{const a=await fetch(`${E}/users/desactivar/${r}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});if(a.ok)Swal.fire({title:"¡Usuario desactivado!",text:"El usuario fue desactivado correctamente.",icon:"success",confirmButtonText:"Aceptar"}),c();else{const u=await a.json();Swal.fire({title:"Error",text:u.error||"No se pudo desactivar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}}catch(a){console.error("Error:",a),Swal.fire({title:"Error",text:"Hubo un problema al desactivar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}},window.deleteUser=async function(r){if((await Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"warning",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#d33",cancelButtonColor:"#aaa"})).isConfirmed)try{(await fetch(`${E}/users/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(Swal.fire({title:"¡Usuario eliminado!",text:"El usuario fue eliminado con éxito.",icon:"success",confirmButtonText:"Aceptar"}),c()):Swal.fire({title:"Error",text:"No se pudo eliminar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}catch(a){console.error("Error:",a),Swal.fire({title:"Error",text:"Hubo un problema al eliminar el usuario.",icon:"error",confirmButtonText:"Aceptar"})}};async function n(){try{const f=await(await fetch(`${E}/asistencia`,{headers:{Authorization:`Bearer ${t}`}})).json(),a=document.querySelector("#asistenciasTable tbody");a.innerHTML="",f.forEach(u=>{const b=document.createElement("tr");b.innerHTML=`
          <td>${u.fecha}</td>  
          <td>${u.hora}</td>
          <td>${u.registrador}</td>
          <td>${u.nombre}</td>
          <td>${u.labor}</td>
          <td>${u.lote}</td>
          <td>${u.turno}</td>

            <td>
              <button class="btn btn-outline-danger" onclick="deleteAsistencia(${u.id})">Eliminar</button>
            </td>
          `,a.appendChild(b)})}catch(r){console.error("Error al cargar asistencias:",r)}}window.deleteAsistencia=async function(r){if((await Swal.fire({title:"¿Estás seguro?",text:"Esta acción no se puede deshacer.",icon:"question",showCancelButton:!0,confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",confirmButtonColor:"#d33",cancelButtonColor:"#aaa"})).isConfirmed)try{(await fetch(`${E}/asistencia/${r}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok?(Swal.fire({title:"¡Eliminado!",text:"El registro de asistencia fue eliminado con éxito.",icon:"success",confirmButtonText:"Aceptar"}),n()):Swal.fire({title:"Error",text:"No se pudo eliminar el registro de asistencia.",icon:"error",confirmButtonText:"Aceptar"})}catch(a){console.error("Error:",a),Swal.fire({title:"Error",text:"Hubo un problema al eliminar la asistencia.",icon:"error",confirmButtonText:"Aceptar"})}}}if((e.includes("salir")||e==="/salir")&&(console.log("Logout button clicked"),localStorage.clear(),console.log("LocalStorage cleared"),window.location.href="/"),e.includes("index.html")||e==="/"){const i=document.getElementById("loginForm");i&&i.addEventListener("submit",async c=>{c.preventDefault();const p=document.getElementById("usuario").value.trim(),n=document.getElementById("password").value.trim(),r=document.getElementById("errorMessage");if(!p||!n){r.innerText="Completa todos los campos.";return}try{const f=await fetch(`${E}/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({usuario:p,password:n})});if(f.ok){const a=await f.json();localStorage.setItem("token",a.token),localStorage.setItem("usuario_id",a.id),localStorage.setItem("perfil",a.rol),localStorage.setItem("nombre",a.nombre),a.rol.toLowerCase()==="admin"?window.location.href="/admin":window.location.href="/asistencia"}else{const a=await f.json();r.innerText=a.error||"Error de login."}}catch(f){console.error("Error en login:",f),r.innerText="Error en la conexión."}})}if(e.includes("asistencia.html")||e==="/asistencia"){let i=function(){r&&(r.pause(),r.srcObject=null),console.log("✅ Escaneo detenido.")},c=function(){if(r.readyState===r.HAVE_ENOUGH_DATA){const h=document.createElement("canvas");h.width=r.videoWidth,h.height=r.videoHeight;const v=h.getContext("2d");v.drawImage(r,0,0,h.width,h.height);const x=v.getImageData(0,0,h.width,h.height),y=jsQR(x.data,h.width,h.height);if(y){const S=y.data,I=document.getElementById("dniInput");I&&(I.value=S),g(S,o).finally(()=>{requestAnimationFrame(c)})}else requestAnimationFrame(c)}else requestAnimationFrame(c)},p=function(){new Audio("https://actions.google.com/sounds/v1/alarms/beep_short.ogg").play().catch(console.error)};const n=document.getElementById("dniInput"),r=document.getElementById("qrScanner");document.getElementById("result");const f=document.getElementById("errorMessage");if(d(),s(),!o){alert("Usuario no identificado."),window.location.href="/index.html";return}n.addEventListener("input",async()=>{const h=n.value.trim();h.length===8&&/^\d{8}$/.test(h)&&(n.value="",Swal.fire({title:"Registrando...",text:"Por favor espera",allowOutsideClick:!1,didOpen:()=>{Swal.showLoading()}}),await g(h,o))});const a=document.getElementById("initQRSCanH");let u=!1;a&&a.addEventListener("click",()=>{u?(i(),a.innerText="Iniciar Lectura",a.classList.replace("btn-danger","btn-success"),u=!1):(b(),a.innerText="Terminar Lectura",a.classList.replace("btn-success","btn-danger"),u=!0)});async function b(){if(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)try{const h=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment"}});r.srcObject=h,r.setAttribute("playsinline",!0),r.play(),requestAnimationFrame(c)}catch{f.innerText="No se pudo acceder a la cámara.",n&&(n.disabled=!0)}else f.innerText="Tu navegador no soporta cámara.",n&&(n.disabled=!0)}async function g(h,v){const x=document.querySelector("#loadLabor").value,y=document.querySelector("#loadLote").value,S=document.querySelector("#setturno").value;if(!x)throw new Error("Labor o lote no seleccionados.");if(!y)throw new Error("Lote no seleccionados.");if(!S)throw new Error("Turno no seleccionados.");const I={dni:h,usuario_id:v,labor:x,lote:y,turno:S};try{const T=await fetch(`${E}/asistencia/`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(I)});if(console.log("Código de estado HTTP:",T.status),T.ok){Swal.close(),p(),Swal.fire({title:"✅ Registrado",text:"Asistencia registrada correctamente.",icon:"success",timer:2e3,showConfirmButton:!1});const $=await T.json(),F=new Date(`${$.fecha}T${$.hora}Z`),W=new Intl.DateTimeFormat("es-PE",{timeZone:"America/Lima",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(F);document.getElementById("nombre").innerText=`✅ ${$.nombre}`,document.getElementById("fechaHora").innerText=`🗓️ ${W}`,f.innerText="",p(),await new Promise(Q=>setTimeout(Q,3e3))}else{const $=await T.json();f.innerText=$.error||"Error al registrar asistencia.",Swal.fire({title:"❌ Error",text:$.error||"No se pudo registrar la asistencia.",icon:"error",confirmButtonText:"Aceptar"})}}catch(T){console.error(T),f.innerText="Error en la conexión.",Swal.fire({title:"❌ Error",text:"Error en la conexión.",icon:"error",confirmButtonText:"Aceptar"})}}}function l(i,c){const p=document.querySelector(i);p?fetch(c).then(n=>n.text()).then(n=>{p.innerHTML=n}).catch(n=>console.error("Error loading component:",n)):console.error(`Element with selector ${i} not found.`)}if(e.includes("productividad")||e==="/productividad"){i();async function i(){try{const p=await(await fetch(`${E}/productividad?usuario_id=${o}`,{headers:{Authorization:`Bearer ${t}`}})).json(),n=document.querySelector("#asistenciasTable tbody");n.innerHTML="",p.forEach(r=>{const f=document.createElement("tr");f.innerHTML=`
          <td>${r.fecha}</td>  
          <td>${r.hora}</td>
          <td>${r.nombre}</td>
          <td>${r.labor}</td>
          <td>${r.lote}</td>
          <td><input type="number" value="${r.avance}" class="form-control" id="avance-${r.id}" data-id="${r.id}" min="0"></td>
          <td><input type="number" value="${r.productividad}" class="form-control" id="productividad-${r.id}" data-id="${r.id}" min="0"></td>
          <td>
            <button class="btn btn-outline-success" data-id="${r.id}" onclick="actualizarRegistro(${r.id})">Actualizar</button>
          </td>
        `,n.appendChild(f)})}catch(c){console.error("Error al cargar asistencias:",c)}}window.actualizarRegistro=async function(c){const p=document.querySelector(`#avance-${c}`),n=document.querySelector(`#productividad-${c}`),r=parseFloat(p.value)||0,f=parseFloat(n.value)||0;try{const a=await fetch(`${E}/productividad/${c}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({avance:r,productividad:f})}),u=await a.json();a.ok?Swal.fire({icon:"success",title:"¡Actualizado!",text:u.message,timer:2e3,showConfirmButton:!1}):Swal.fire({icon:"error",title:"Error al actualizar",text:u.error||"Ocurrió un error inesperad o"})}catch(a){Swal.fire({icon:"error",title:"Error de red",text:a.message||"No se pudo conectar al servidor"})}}}async function d(){try{const c=await(await fetch(`${E}/labor`,{headers:{Authorization:`Bearer ${t}`}})).json(),p=document.querySelector("#loadLabor");p.innerHTML="<option selected disabled>Selecciona una labor</option>",c.forEach(n=>{const r=document.createElement("option");r.value=n.id,r.textContent=n.description,p.appendChild(r)}),p.tomselect||new TomSelect(p,{placeholder:"Buscar labor...",allowEmptyOption:!0})}catch(i){console.error("Error al cargar labores:",i)}}async function s(){try{const c=await(await fetch(`${E}/lote`,{headers:{Authorization:`Bearer ${t}`}})).json(),p=document.querySelector("#loadLote");p.innerHTML="<option selected disabled>Selecciona un lote</option>",c.forEach(n=>{const r=document.createElement("option");r.value=n.id,r.textContent=n.id,p.appendChild(r)})}catch(i){console.error("Error al cargar lotes:",i)}}});
